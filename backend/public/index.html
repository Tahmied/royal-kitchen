<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/styles.css">
    <title>Royal Kitchen | Homepage  </title>
</head>
<body>

     <section class="first-section">
        <div class="first-container">
            <nav>
            <div class="left-nav">
                <a href="#" class="nav-link">Home</a>
                <a href="#" class="nav-link">Facebook</a>
            </div>
            <div class="mid-nav">
                <a href="#" class="nav-img">
                    <img src="images/hero/logo-header.png" alt="royal kitchen logo" class="logo">
                </a>
            </div>
            <div class="right-nav">
                <a href="#" class="nav-link">Instagram</a>
                <a href="#" class="nav-link">Twitter</a>
            </div>
            </nav>
        <div class="hero">
            <p class="hero-text">We Create Emotions</p>
            <p class="hero-description">With over 12 years of experience, Royal Kitchen specializes in designing and building custom-made kitchens that reflect individual taste and timeless sophistication. Every kitchen is a one-of-a-kind masterpiece</p>
        </div>
        <div class="underhero">
            <div class="hero-img-container">
                <img src="images/hero/hero image.png" alt="" class="hero-image">
                <button class="hero-cta-btn pcf-open">
                    <p>Consultation</p>
                    <img src="images/hero/button-arrow.svg" alt="">
                </button>
            </div>
        </div>
        </div>
    </section>

    <section class="second-section">

        <div class="two-container">
            <div class="two-left">
                <p class="two-text">Award Winning Quality</p>
                <p class="two-description">Honored with the Diamond of Furniture 2025 for outstanding design and craftsmanship</p>
                <button id="second-cta-btn" class="cta-btn">
                    <p class="cta-btn-text">Contact Us</p>
                    <img src="images/hero/button-arrow.svg" alt="" class="cta-btn-arrow">
                </button>
            </div>

            <div class="two-right">
                <img class="two-right-img" src="images/section-two/two-right-img.png" alt="">
            </div>
        </div>

        <div class="under-two">
          <img src="images/section-two/two-big-image.png" alt="" class="under-two-img">
        </div>

    </section>

    <div class="space-100">
      
    </div>

    <section class="third-section">
        <p class="puls-biznesu-text">Puls Biznesu</p>
        <div class="third-container">
            <div class="third-left">
                <p class="third-text-left">As Seen in Puls Biznesu</p>
                <p class="third-description">Our founder’s success story was featured in Poland’s top business daily</p>
                <button class="third-btn">
                    <p>Read The Article</p>
                     <img src="images/hero/button-arrow.svg" alt="" class="cta-btn-arrow">
                </button>
            </div>

          <div class="third-center">
            <img src="images/section-three/third-main-imaggepng.png" alt="" class="third-center-img">
          </div>

          <div class="third-right">
              <img src="images/section-three/Puls-Biznesu_Logo_Website 1.png" alt="">
          </div>
          <img src="images/section-three/shadow-overlay.png" alt="" class="shadow-overlay">
        </div>
    </section>

        <!-- projects section -->
    <section class="fourth-section">
        <img src="images/section-four/fourth-overlay-shadow.png" alt="" class="fourth-overlay-shadow">
        <h2 class="fourth-heading">Featured Projects</h2>
        <div class="fourth-container">
            <div class="fourth-left">
                <img src="images/section-four/project-one-pinned.png" alt="" class="pinned-project-img" id="pinned-project-img-id">

                <button class="project-pinned-pic-btn">
                    <div class="house-owner">
                        <img src="images/section-four/owner.png" alt="" class="profile-pic">
                    </div>
                    <div class="house-owner-details">
                        <p class="owner-name">Tahmied's Home</p>
                        <p class="see-details">See Details</p>
                    </div>
                </button>

                <button class="project-details-page-indicator-btn">
                    <span class="project-button-text">Click for details</span>
                    <img id="project-cta-btn-arrow" src="images/hero/button-arrow.svg" alt="" class="cta-btn-arrow">
                </button>

            </div>
            <div class="fourth-right">
                <div class="other-project-imgs" id="active-project-img">
                    <img src="images/section-four/project-one-pinned.png" alt="">
                </div>
                <div class="other-project-imgs">
                    <img src="images/section-four/other-project-one-imgs1.png" alt="">
                </div>
                <div class="other-project-imgs">
                    <img src="images/section-four/other-project-one-imgs1.png" alt="">
                </div>
                <div class="other-project-imgs">
                    <img src="images/section-four/other-project-one-imgs2.png" alt="">
                </div>
                <div class="other-project-imgs">
                    <img src="images/section-four/other-project-one-imgs3.png" alt="">
                </div>
                <div class="other-project-imgs">
                    <img src="images/section-four/other-project-one-imgs-3.png" alt="">
                </div>
            </div>
        </div>
        <div class="fourth-video-container">
            <img src="images/section-four/fourth-video-thumbnail.png" alt="" class="fourth-video-thumbnail">
            <div class="fourth-video-overlay">
                <p class="video-overlay-text">PLAY</p>
                <img src="images/section-four/video-play-icon.svg" alt="" class="video-play-icon">
                <p class="video-overlay-text">VIDEO</p>
            </div>
        </div>
    </section>

    <section id="reverse-project-section" class="fourth-section">
        <div id="reverse-project-container" class="fourth-container">
              <div class="fourth-left">
                <img src="images/section-four/project-one-pinned.png" alt="" class="pinned-project-img" id="pinned-project-img-id">

                <button class="project-pinned-pic-btn">
                    <div class="house-owner">
                        <img src="images/section-four/owner.png" alt="" class="profile-pic">
                    </div>
                    <div class="house-owner-details">
                        <p class="owner-name">Tahmied's Home</p>
                        <p class="see-details">See Details</p>
                    </div>
                </button>

                <button class="project-details-page-indicator-btn">
                    <span class="project-button-text">Click for details</span>
                    <img id="project-cta-btn-arrow" src="images/hero/button-arrow.svg" alt="" class="cta-btn-arrow">
                </button>

            </div>
            
            <div class="fourth-right">
                <div class="other-project-imgs" id="active-project-img">
                    <img src="images/section-four/project-one-pinned.png" alt="">
                </div>
                <div class="other-project-imgs">
                    <img src="images/section-four/other-project-one-imgs1.png" alt="">
                </div>
                <div class="other-project-imgs">
                    <img src="images/section-four/other-project-one-imgs1.png" alt="">
                </div>
                <div class="other-project-imgs">
                    <img src="images/section-four/other-project-one-imgs2.png" alt="">
                </div>
                <div class="other-project-imgs">
                    <img src="images/section-four/other-project-one-imgs3.png" alt="">
                </div>
                <div class="other-project-imgs">
                    <img src="images/section-four/other-project-one-imgs-3.png" alt="">
                </div>
            </div>
        </div>
        <div class="fourth-video-container">
            <img src="images/section-four/fourth-video-thumbnail.png" alt="" class="fourth-video-thumbnail">
            <div class="fourth-video-overlay">
                <p class="video-overlay-text">PLAY</p>
                <img src="images/section-four/video-play-icon.svg" alt="" class="video-play-icon">
                <p class="video-overlay-text">VIDEO</p>
            </div>
        </div>
    </section>

    <section class="fourth-section">
        <img src="images/section-four/fourth-overlay-shadow.png" alt="" class="fourth-overlay-shadow"> <br><br>
        <div class="fourth-container">
             <div class="fourth-left">
                <img src="images/section-four/project-one-pinned.png" alt="" class="pinned-project-img" id="pinned-project-img-id">

                <button class="project-pinned-pic-btn">
                    <div class="house-owner">
                        <img src="images/section-four/owner.png" alt="" class="profile-pic">
                    </div>
                    <div class="house-owner-details">
                        <p class="owner-name">Tahmied's Home</p>
                        <p class="see-details">See Details</p>
                    </div>
                </button>

                <button class="project-details-page-indicator-btn">
                    <span class="project-button-text">Click for details</span>
                    <img id="project-cta-btn-arrow" src="images/hero/button-arrow.svg" alt="" class="cta-btn-arrow">
                </button>

            </div>
            <div class="fourth-right">
                <div class="other-project-imgs" id="active-project-img">
                    <img src="images/section-four/project-one-pinned.png" alt="">
                </div>
                <div class="other-project-imgs">
                    <img src="images/section-four/other-project-one-imgs1.png" alt="">
                </div>
                <div class="other-project-imgs">
                    <img src="images/section-four/other-project-one-imgs1.png" alt="">
                </div>
                <div class="other-project-imgs">
                    <img src="images/section-four/other-project-one-imgs2.png" alt="">
                </div>
                <div class="other-project-imgs">
                    <img src="images/section-four/other-project-one-imgs3.png" alt="">
                </div>
                <div class="other-project-imgs">
                    <img src="images/section-four/other-project-one-imgs-3.png" alt="">
                </div>
            </div>
        </div>
        <div class="fourth-video-container">
            <img src="images/section-four/fourth-video-thumbnail.png" alt="" class="fourth-video-thumbnail">
            <div class="fourth-video-overlay">
                <p class="video-overlay-text">PLAY</p>
                <img src="images/section-four/video-play-icon.svg" alt="" class="video-play-icon">
                <p class="video-overlay-text">VIDEO</p>
            </div>
        </div>
    </section>


     <!-- feedback section -->
    <section class="fifth-section">
        <p class="feedback-title">FEEDBACK</p>
        <div class="fifth-container">
            <div class="fifth-left">
                <img src="images/section-five/fifth-left-img.png" alt="" class="fifth-left-img">
                <img src="images/section-five/fifth-left-img-shadow.png" alt="" class="fifth-left-shadow">
            </div>
            <div class="fifth-feedback">
                <p class="feedback-name">Grzegorz Zawierucha</p>
                <p class="feedback-text">MasterChef Winner <span class="feedback-highlight">Grzegorz Zawierucha</span> chose Royal Kitchen for his home</p>
                <img src="images/section-five/feedback-logo.png" alt="" class="feedback-logo">
            </div>
            <div class="fifth-right">
                <img src="images/section-five/fifth-right-img.png" alt="" class="fifth-right-img">
            </div>
        </div>
        <button class="feedback-button">
            <p class="feedback-btn-text">SEE FULL PROJECT</p>
            <img src="images/section-five/feedback-arrow.svg" alt="" class="feedback-arrow">
        </button>
    </section>

      <!-- sixth section -->
    <section class="sixth-section">
            <p class="sixth-title">Why Royal Kitchen</p>
            <div class="sixth-container">

                <div class="sixth-left">
                   
                    <div class = "sixth-left-main" >
                        <div class="sixth-left-container">
                                <img src="images/section-six/experience tag image.png" alt="" class="experience-tag">
                          <div class="sixth-left-image-container">
  <img class="slider-image image-after" src="images/section-six/after image.png" alt="after" />
  <img class="slider-image image-before" src="images/section-six/before image.jpeg" alt="before" />
</div>
                          <input
                            type="range"
                            min="0"
                            max="100"
                            value="50"
                            aria-label="Percentage of before photo shown"
                            class="slider"
                          />
                          <div class="slider-line" aria-hidden="true"></div>
                          <div class="slider-button" aria-hidden="true">

                              <img src="images/section-six/Group 19.png" alt="">

                          </div>
                        </div>

                    </div>
                </div>


                <div class="sixth-right">
                    <p class="sixth-heading">Where Experience Meets Innovation</p>
                    <p class="sixth-description">Laser-precise measurements, state-of-the-art CNC production, and EU-backed innovation setting the standard in bespoke kitchens for 12 years.</p>
                    <button style="margin: 0;" class="sixth-cta-btn">
                        <p class="sixth-cta-btn-text">Learn More</p>
                        <img src="images/hero/button-arrow.svg" alt="" class="sixth-cta-btn-arrow">
                    </button>
                </div>
            </div>
    </section>
        
    <!-- footer -->
    <footer>
            <div class="footer-container">
                <img src="images/footer/footer-top-img.png" alt="" class="footer-top-img">
                <p class="footer-heading">
                    Ready for Your Own Royal Kitchen?
                </p>
                <p class="footer-description">
                    Contact us today to schedule a private consultation – we’ll handle every detail of your dream kitchen.
                </p>

                <button class="footer-cta-btn">
                        <p class="footer-cta-btn-text">Schedule a consultation</p>
                        <img src="images/hero/button-arrow.svg" alt="" class="footer-cta-btn-arrow">
                </button>
            </div>
            <div class="footer-end">
                <img src="images/footer/left-arrow.svg" alt="" class="footer-left-arrow">
                <div class="footer-center">
                    <img src="images/footer/eu-icon.png" alt="" class="eu-icon">
                    <p class="footer-last-description">
                        Project co-financed by <br> <span class="footer-highlight">the European Union</span>
                    </p>
                </div>
                <img src="images/footer/footer-right-arrow.svg" alt="" class="footer-right-arrow">
            </div>
    </footer>


    <!-- contact form -->
    <div class="pcf-root" aria-hidden="true">
      <div class="pcf-overlay" id="pcf-overlay" aria-hidden="true">
          <div class="pcf-modal" role="dialog" aria-modal="true" aria-labelledby="pcf-modalTitle" id="pcf-modal">
            <div class="pcf-modal-head">
              <div class="pcf-modal-title">
                <!-- icon -->
                <svg width="36" height="36" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                  <path d="M21 8V16C21 18 19 20 17 20H7C5 20 3 18 3 16V8" stroke="url(#pcf-g)" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"></path>
                  <path d="M7 12L10 14L17 9" stroke="url(#pcf-g)" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"></path>
                  <defs><linearGradient id="pcf-g" x1="0" x2="1" y1="0" y2="1"><stop offset="0" stop-color="#7C3AED"></stop><stop offset="1" stop-color="#06B6D4"></stop></linearGradient></defs>
                </svg>
              
                <div>
                  <h3 id="pcf-modalTitle">Start a conversation</h3>
                  <div class="pcf-modal-sub">Tell us a little about your project — we’ll get back within 1 business day.</div>
                </div>
              </div>
            
              <button class="pcf-close-btn" id="pcf-closeBtn" aria-label="Close contact form">✕</button>
            </div>
          
            <form class="pcf-contact" id="pcf-contactForm" novalidate>
              <div class="pcf-field">
                <input type="text" id="pcf-name" name="name" autocomplete="name" required />
                <label for="pcf-name" class="pcf-floating">Full name</label>
              </div>
            
              <div class="pcf-field">
                <input type="email" id="pcf-email" name="email" autocomplete="email" required />
                <label for="pcf-email" class="pcf-floating">Phone Number</label>
              </div>
            
              <div class="pcf-field pcf-full">
                <input type="text" id="pcf-company" name="company" />
                <label for="pcf-company" class="pcf-floating">Email address</label>
              </div>
            
              <div class="pcf-field pcf-full">
                <textarea id="pcf-message" name="message" required></textarea>
                <label for="pcf-message" class="pcf-floating">Tell us about your project</label>
                <div class="pcf-hint">A short summary, timeline, and preferred budget helps us reply faster.</div>
              </div>
            
              <div class="pcf-full pcf-actions">
                <button type="button" class="pcf-secondary" id="pcf-cancelBtn">Cancel</button>
                <button type="submit" class="pcf-submit" id="pcf-submitBtn">Send message</button>
              </div>
            </form>
          
            <!-- success container will be inserted dynamically -->
          </div>
        </div>
</div>


    <script src="./js/index.js"></script>
<script>
(function() {
  'use strict';
  
  // Configuration
  const CONFIG = {
    REMOVE_DELAYS: {
      second: 120,
      third: 90,
      fourth: 100,
      fifth: 110,
      sixth: 100,
      footer: 110
    },
    INTERSECTION_OPTIONS: {
      root: null,
      rootMargin: '0px 0px -12% 0px',
      threshold: [0, 0.12, 0.25, 0.5]
    },
    PCF_TRIGGER_CLASS: 'pcf-open'
  };

  // Utility functions
  const utils = {
    // Check if user prefers reduced motion
    prefersReducedMotion: () => window.matchMedia?.('(prefers-reduced-motion: reduce)').matches,
    
    // Debounced class toggle with cleanup
    createToggler: (element, delay) => {
      let timer = null;
      return {
        add: () => {
          if (timer) {
            clearTimeout(timer);
            timer = null;
          }
          element.classList.add('in-view');
        },
        remove: () => {
          if (timer) clearTimeout(timer);
          timer = setTimeout(() => {
            element.classList.remove('in-view');
            timer = null;
          }, delay);
        }
      };
    },

    // Create intersection observer with common logic
    createObserver: (callback, options = CONFIG.INTERSECTION_OPTIONS) => {
      return new IntersectionObserver((entries) => {
        entries.forEach(entry => {
          const isVisible = entry.intersectionRatio >= 0.12;
          callback(entry.target, isVisible);
        });
      }, options);
    }
  };

  // Section Animation Manager
  const sectionAnimations = {
    observers: new Map(),
    togglers: new Map(),

    init() {
      if (utils.prefersReducedMotion()) {
        this.handleReducedMotion();
        return;
      }
      this.setupObservers();
    },

    handleReducedMotion() {
      const selectors = ['.second-section', '.third-section', '.fourth-section', '.fifth-section', '.sixth-section', 'footer'];
      selectors.forEach(selector => {
        document.querySelectorAll(selector).forEach(el => el.classList.add('in-view'));
      });
    },

    setupObservers() {
      // Individual sections with specific configs
      this.setupSingleSection('.second-section', CONFIG.REMOVE_DELAYS.second);
      this.setupSingleSection('.third-section', CONFIG.REMOVE_DELAYS.third, {
        ...CONFIG.INTERSECTION_OPTIONS,
        rootMargin: '0px 0px -10% 0px',
        threshold: [0, 0.12, 0.25]
      });
      this.setupSingleSection('.fifth-section', CONFIG.REMOVE_DELAYS.fifth);
      this.setupSingleSection('.sixth-section', CONFIG.REMOVE_DELAYS.sixth);
      this.setupSingleSection('footer', CONFIG.REMOVE_DELAYS.footer);
      
      // Special handling for multiple .fourth-section elements
      this.setupFourthSections();
    },

    setupSingleSection(selector, delay, options) {
      const element = document.querySelector(selector);
      if (!element) return;

      const toggler = utils.createToggler(element, delay);
      this.togglers.set(selector, toggler);

      const observer = utils.createObserver((target, isVisible) => {
        if (isVisible) toggler.add();
        else toggler.remove();
      }, options);

      observer.observe(element);
      this.observers.set(selector, observer);
    },

    setupFourthSections() {
      const observedElements = new WeakSet();
      
      const observer = utils.createObserver((target, isVisible) => {
        if (!target.__removeTimer) target.__removeTimer = null;
        
        if (isVisible) {
          if (target.__removeTimer) {
            clearTimeout(target.__removeTimer);
            target.__removeTimer = null;
          }
          target.classList.add('in-view');
        } else {
          if (target.__removeTimer) clearTimeout(target.__removeTimer);
          target.__removeTimer = setTimeout(() => {
            target.classList.remove('in-view');
            target.__removeTimer = null;
          }, CONFIG.REMOVE_DELAYS.fourth);
        }
      });

      const observeElements = () => {
        document.querySelectorAll('.fourth-section').forEach(section => {
          if (!observedElements.has(section)) {
            observer.observe(section);
            observedElements.add(section);
          }
        });
      };

      // Observe existing elements
      observeElements();

      // Watch for dynamically added elements
      const mutationObserver = new MutationObserver(mutations => {
        mutations.forEach(mutation => {
          if (mutation.type === 'childList' && mutation.addedNodes.length) {
            mutation.addedNodes.forEach(node => {
              if (node.nodeType === 1) {
                if (node.classList?.contains('fourth-section')) {
                  if (!observedElements.has(node)) {
                    observer.observe(node);
                    observedElements.add(node);
                  }
                }
                node.querySelectorAll?.('.fourth-section').forEach(section => {
                  if (!observedElements.has(section)) {
                    observer.observe(section);
                    observedElements.add(section);
                  }
                });
              }
            });
          }
        });
      });

      mutationObserver.observe(document.body, { childList: true, subtree: true });
      this.observers.set('fourth-sections', { observer, mutationObserver });
    }
  };

  // Contact Form Manager
  const contactForm = {
    elements: {},
    lastFocusedElement: null,
    focusTrapHandler: null,

    init() {
      this.cacheElements();
      if (!this.elements.root) {
        console.warn('PCF: .pcf-root not found - contact form not initialized.');
        return;
      }
      this.bindEvents();
      this.initializeForm();
    },

    cacheElements() {
      this.elements = {
        root: document.querySelector('.pcf-root'),
        overlay: document.getElementById('pcf-overlay'),
        modal: document.getElementById('pcf-modal'),
        closeBtn: document.getElementById('pcf-closeBtn'),
        cancelBtn: document.getElementById('pcf-cancelBtn'),
        form: document.getElementById('pcf-contactForm'),
        submitBtn: document.getElementById('pcf-submitBtn')
      };
    },

    bindEvents() {
      // Delegated event for form triggers
      document.addEventListener('click', this.handleTriggerClick.bind(this));
      
      // Form events
      document.addEventListener('input', this.refreshFloatingLabels.bind(this));
      document.addEventListener('change', this.refreshFloatingLabels.bind(this));
      
      // Close events
      this.elements.closeBtn?.addEventListener('click', this.closeModal.bind(this));
      this.elements.cancelBtn?.addEventListener('click', this.closeModal.bind(this));
      this.elements.overlay?.addEventListener('click', this.handleOverlayClick.bind(this));
      
      // Form submission
      this.elements.form?.addEventListener('submit', this.handleSubmit.bind(this));
    },

    initializeForm() {
      this.elements.overlay?.setAttribute('aria-hidden', 'true');
      this.elements.root?.setAttribute('aria-hidden', 'true');
      this.refreshFloatingLabels();
    },

    refreshFloatingLabels() {
      this.elements.root?.querySelectorAll('.pcf-field').forEach(field => {
        const input = field.querySelector('input, textarea, select');
        if (!input) return;
        
        const hasValue = input.value && input.value.trim() !== '';
        field.classList.toggle('pcf-has-value', hasValue);
      });
    },

    handleTriggerClick(e) {
      const trigger = e.target.closest?.(`.${CONFIG.PCF_TRIGGER_CLASS}`);
      if (!trigger) return;
      
      e.preventDefault();
      const prefill = {
        name: trigger.getAttribute('data-pcf-prefill-name') || '',
        email: trigger.getAttribute('data-pcf-prefill-email') || '',
        message: trigger.getAttribute('data-pcf-prefill-message') || ''
      };
      this.openModal(prefill);
    },

    handleOverlayClick(e) {
      if (e.target === this.elements.overlay) {
        this.closeModal();
      }
    },

    openModal(prefill = {}) {
      this.elements.overlay?.setAttribute('aria-hidden', 'false');
      this.elements.root?.setAttribute('aria-hidden', 'false');
      
      // Prefill form
      if (this.elements.form) {
        if (prefill.name && this.elements.form.name) this.elements.form.name.value = prefill.name;
        if (prefill.email && this.elements.form.email) this.elements.form.email.value = prefill.email;
        if (prefill.message && this.elements.form.message) this.elements.form.message.value = prefill.message;
      }
      
      this.refreshFloatingLabels();
      this.setupFocusTrap();
      
      // Focus first input after animation
      setTimeout(() => {
        const nameInput = document.getElementById('pcf-name');
        nameInput?.focus();
      }, 140);
    },

    closeModal() {
      this.elements.overlay?.setAttribute('aria-hidden', 'true');
      this.elements.root?.setAttribute('aria-hidden', 'true');
      
      this.removeFocusTrap();
      this.resetForm();
      
      if (this.lastFocusedElement?.focus) {
        this.lastFocusedElement.focus();
      }
    },

    setupFocusTrap() {
      this.lastFocusedElement = document.activeElement;
      
      if (!this.elements.modal) return;
      
      const focusableElements = Array.from(
        this.elements.modal.querySelectorAll(
          'a[href], button:not([disabled]), input, select, textarea, [tabindex]:not([tabindex="-1"])'
        )
      ).filter(Boolean);
      
      if (!focusableElements.length) return;
      
      const firstElement = focusableElements[0];
      const lastElement = focusableElements[focusableElements.length - 1];
      
      this.focusTrapHandler = (e) => {
        if (e.key === 'Tab') {
          if (e.shiftKey && document.activeElement === firstElement) {
            e.preventDefault();
            lastElement.focus();
          } else if (!e.shiftKey && document.activeElement === lastElement) {
            e.preventDefault();
            firstElement.focus();
          }
        }
        if (e.key === 'Escape') {
          this.closeModal();
        }
      };
      
      document.addEventListener('keydown', this.focusTrapHandler);
    },

    removeFocusTrap() {
      if (this.focusTrapHandler) {
        document.removeEventListener('keydown', this.focusTrapHandler);
        this.focusTrapHandler = null;
      }
    },

    resetForm() {
      // Remove success card if present
      const successCard = this.elements.modal?.querySelector('.pcf-success');
      successCard?.remove();
      
      // Reset form state
      if (this.elements.form) {
        this.elements.form.style.display = '';
        this.elements.form.reset();
      }
      
      if (this.elements.submitBtn) {
        this.elements.submitBtn.disabled = false;
        this.elements.submitBtn.textContent = 'Send message';
      }
      
      this.refreshFloatingLabels();
    },

    async handleSubmit(e) {
      e.preventDefault();
      
      const formData = new FormData(this.elements.form);
      const name = formData.get('name')?.toString().trim();
      const email = formData.get('email')?.toString().trim();
      const message = formData.get('message')?.toString().trim();
      
      if (!name || !email || !message) {
        this.shakeModal();
        return;
      }
      
      await this.submitForm();
    },

    shakeModal() {
      this.elements.modal?.animate([
        { transform: 'translateX(0)' },
        { transform: 'translateX(-6px)' },
        { transform: 'translateX(6px)' },
        { transform: 'translateX(0)' }
      ], { duration: 360 });
    },

    async submitForm() {
      // Show loading state
      if (this.elements.submitBtn) {
        this.elements.submitBtn.disabled = true;
        this.elements.submitBtn.innerHTML = '<span class="pcf-spinner"></span>';
      }
      
      // Simulate network delay
      await new Promise(resolve => setTimeout(resolve, 900 + Math.random() * 900));
      
      this.showSuccessMessage();
    },

    showSuccessMessage() {
      if (!this.elements.form || !this.elements.modal) return;
      
      this.elements.form.style.display = 'none';
      
      const successCard = document.createElement('div');
      successCard.className = 'pcf-success pcf-full';
      successCard.innerHTML = `
        <div class="pcf-check" aria-hidden="true">
          <svg viewBox="0 0 24 24" fill="none">
            <path d="M20 6L9 17l-5-5" stroke="${getComputedStyle(document.documentElement).getPropertyValue('--pcf-success') || '#22c55e'}" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"></path>
          </svg>
        </div>
        <h3 style="margin:0;">Message sent</h3>
        <p style="margin:0;color:var(--pcf-muted);text-align:center;max-width:420px">
          Thanks! We received your message and will reply within 1 business day. If your request is urgent, please include a phone number.
        </p>
      `;
      
      this.elements.form.insertAdjacentElement('afterend', successCard);
      this.elements.closeBtn?.focus();
      
      // Auto-close after delay
      setTimeout(() => {
        const fadeOut = successCard.animate([{ opacity: 1 }, { opacity: 0 }], {
          duration: 600,
          fill: 'forwards'
        });
        fadeOut.onfinish = () => this.closeModal();
      }, 1400);
    }
  };

  // Initialize everything when DOM is ready
  function initialize() {
    sectionAnimations.init();
    contactForm.init();
  }

  if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', initialize);
  } else {
    initialize();
  }

  // Expose utilities for debugging (optional - remove in production)
  if (typeof window !== 'undefined' && window.console) {
    window.__pageAnimations = { sectionAnimations, contactForm };
  }

})();
</script>

</body>
</html>