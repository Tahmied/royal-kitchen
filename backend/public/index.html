<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/styles.css">
    <title>Royal Kitchen | Homepage  </title>
</head>
<body>

     <section class="first-section">
        <div class="first-container">
            <nav>
            <div class="left-nav">
                <a href="#" class="nav-link">Home</a>
                <a href="#" class="nav-link">Facebook</a>
            </div>
            <div class="mid-nav">
                <a href="#" class="nav-img">
                    <img src="images/hero/logo-header.png" alt="royal kitchen logo" class="logo">
                </a>
            </div>
            <div class="right-nav">
                <a href="#" class="nav-link">Instagram</a>
                <a href="#" class="nav-link">Twitter</a>
            </div>
            </nav>
        <div class="hero">
            <p class="hero-text">We Create Emotions</p>
            <p class="hero-description">With over 12 years of experience, Royal Kitchen specializes in designing and building custom-made kitchens that reflect individual taste and timeless sophistication. Every kitchen is a one-of-a-kind masterpiece</p>
        </div>
        <div class="underhero">
            <div class="hero-img-container">
                <img src="images/hero/hero image.png" alt="" class="hero-image">
                <button class="hero-cta-btn pcf-open">
                    <p>Consultation</p>
                    <img src="images/hero/button-arrow.svg" alt="">
                </button>
            </div>
        </div>
        </div>
    </section>

    <section class="second-section">

        <div class="two-container">
            <div class="two-left">
                <p class="two-text">Award Winning Quality</p>
                <p class="two-description">Honored with the Diamond of Furniture 2025 for outstanding design and craftsmanship</p>
                <button id="second-cta-btn" class="cta-btn">
                    <p class="cta-btn-text">Contact Us</p>
                    <img src="images/hero/button-arrow.svg" alt="" class="cta-btn-arrow">
                </button>
            </div>

            <div class="two-right">
                <img class="two-right-img" src="images/section-two/two-right-img.png" alt="">
            </div>
        </div>

        <div class="under-two">
          <img src="images/section-two/two-big-image.png" alt="" class="under-two-img">
        </div>

    </section>

    <div class="space-100">
      
    </div>

    <section class="third-section">
        <p class="puls-biznesu-text">Puls Biznesu</p>
        <div class="third-container">
            <div class="third-left">
                <p class="third-text-left">As Seen in Puls Biznesu</p>
                <p class="third-description">Our founder’s success story was featured in Poland’s top business daily</p>
                <button class="third-btn">
                    <p>Read The Article</p>
                     <img src="images/hero/button-arrow.svg" alt="" class="cta-btn-arrow">
                </button>
            </div>

          <div class="third-center">
            <img src="images/section-three/third-main-imaggepng.png" alt="" class="third-center-img">
          </div>

          <div class="third-right">
              <img src="images/section-three/Puls-Biznesu_Logo_Website 1.png" alt="">
          </div>
          <img src="images/section-three/shadow-overlay.png" alt="" class="shadow-overlay">
        </div>
    </section>

        <!-- projects section -->
    <section class="fourth-section">
        <img src="images/section-four/fourth-overlay-shadow.png" alt="" class="fourth-overlay-shadow">
        <h2 class="fourth-heading">Featured Projects</h2>
        <div class="fourth-container">
            <div class="fourth-left">
                <img src="images/section-four/project-one-pinned.png" alt="" class="pinned-project-img" id="pinned-project-img-id">

                <button class="project-pinned-pic-btn">
                    <div class="house-owner">
                        <img src="images/section-four/owner.png" alt="" class="profile-pic">
                    </div>
                    <div class="house-owner-details">
                        <p class="owner-name">Tahmied's Home</p>
                        <p class="see-details">See Details</p>
                    </div>
                </button>

                <button class="project-details-page-indicator-btn">
                    <span class="project-button-text">Click for details</span>
                    <img id="project-cta-btn-arrow" src="images/hero/button-arrow.svg" alt="" class="cta-btn-arrow">
                </button>

            </div>
            <div class="fourth-right">
                <div class="other-project-imgs" id="active-project-img">
                    <img src="images/section-four/project-one-pinned.png" alt="">
                </div>
                <div class="other-project-imgs">
                    <img src="images/section-four/other-project-one-imgs1.png" alt="">
                </div>
                <div class="other-project-imgs">
                    <img src="images/section-four/other-project-one-imgs1.png" alt="">
                </div>
                <div class="other-project-imgs">
                    <img src="images/section-four/other-project-one-imgs2.png" alt="">
                </div>
                <div class="other-project-imgs">
                    <img src="images/section-four/other-project-one-imgs3.png" alt="">
                </div>
                <div class="other-project-imgs">
                    <img src="images/section-four/other-project-one-imgs-3.png" alt="">
                </div>
            </div>
        </div>
        <div class="fourth-video-container">
            <img src="images/section-four/fourth-video-thumbnail.png" alt="" class="fourth-video-thumbnail">
            <div class="fourth-video-overlay">
                <p class="video-overlay-text">PLAY</p>
                <img src="images/section-four/video-play-icon.svg" alt="" class="video-play-icon">
                <p class="video-overlay-text">VIDEO</p>
            </div>
        </div>
    </section>

    <section id="reverse-project-section" class="fourth-section">
        <div id="reverse-project-container" class="fourth-container">
              <div class="fourth-left">
                <img src="images/section-four/project-one-pinned.png" alt="" class="pinned-project-img" id="pinned-project-img-id">

                <button class="project-pinned-pic-btn">
                    <div class="house-owner">
                        <img src="images/section-four/owner.png" alt="" class="profile-pic">
                    </div>
                    <div class="house-owner-details">
                        <p class="owner-name">Tahmied's Home</p>
                        <p class="see-details">See Details</p>
                    </div>
                </button>

                <button class="project-details-page-indicator-btn">
                    <span class="project-button-text">Click for details</span>
                    <img id="project-cta-btn-arrow" src="images/hero/button-arrow.svg" alt="" class="cta-btn-arrow">
                </button>

            </div>
            
            <div class="fourth-right">
                <div class="other-project-imgs" id="active-project-img">
                    <img src="images/section-four/project-one-pinned.png" alt="">
                </div>
                <div class="other-project-imgs">
                    <img src="images/section-four/other-project-one-imgs1.png" alt="">
                </div>
                <div class="other-project-imgs">
                    <img src="images/section-four/other-project-one-imgs1.png" alt="">
                </div>
                <div class="other-project-imgs">
                    <img src="images/section-four/other-project-one-imgs2.png" alt="">
                </div>
                <div class="other-project-imgs">
                    <img src="images/section-four/other-project-one-imgs3.png" alt="">
                </div>
                <div class="other-project-imgs">
                    <img src="images/section-four/other-project-one-imgs-3.png" alt="">
                </div>
            </div>
        </div>
        <div class="fourth-video-container">
            <img src="images/section-four/fourth-video-thumbnail.png" alt="" class="fourth-video-thumbnail">
            <div class="fourth-video-overlay">
                <p class="video-overlay-text">PLAY</p>
                <img src="images/section-four/video-play-icon.svg" alt="" class="video-play-icon">
                <p class="video-overlay-text">VIDEO</p>
            </div>
        </div>
    </section>

    <section class="fourth-section">
        <img src="images/section-four/fourth-overlay-shadow.png" alt="" class="fourth-overlay-shadow"> <br><br>
        <div class="fourth-container">
             <div class="fourth-left">
                <img src="images/section-four/project-one-pinned.png" alt="" class="pinned-project-img" id="pinned-project-img-id">

                <button class="project-pinned-pic-btn">
                    <div class="house-owner">
                        <img src="images/section-four/owner.png" alt="" class="profile-pic">
                    </div>
                    <div class="house-owner-details">
                        <p class="owner-name">Tahmied's Home</p>
                        <p class="see-details">See Details</p>
                    </div>
                </button>

                <button class="project-details-page-indicator-btn">
                    <span class="project-button-text">Click for details</span>
                    <img id="project-cta-btn-arrow" src="images/hero/button-arrow.svg" alt="" class="cta-btn-arrow">
                </button>

            </div>
            <div class="fourth-right">
                <div class="other-project-imgs" id="active-project-img">
                    <img src="images/section-four/project-one-pinned.png" alt="">
                </div>
                <div class="other-project-imgs">
                    <img src="images/section-four/other-project-one-imgs1.png" alt="">
                </div>
                <div class="other-project-imgs">
                    <img src="images/section-four/other-project-one-imgs1.png" alt="">
                </div>
                <div class="other-project-imgs">
                    <img src="images/section-four/other-project-one-imgs2.png" alt="">
                </div>
                <div class="other-project-imgs">
                    <img src="images/section-four/other-project-one-imgs3.png" alt="">
                </div>
                <div class="other-project-imgs">
                    <img src="images/section-four/other-project-one-imgs-3.png" alt="">
                </div>
            </div>
        </div>
        <div class="fourth-video-container">
            <img src="images/section-four/fourth-video-thumbnail.png" alt="" class="fourth-video-thumbnail">
            <div class="fourth-video-overlay">
                <p class="video-overlay-text">PLAY</p>
                <img src="images/section-four/video-play-icon.svg" alt="" class="video-play-icon">
                <p class="video-overlay-text">VIDEO</p>
            </div>
        </div>
    </section>


     <!-- feedback section -->
    <section class="fifth-section">
        <p class="feedback-title">FEEDBACK</p>
        <div class="fifth-container">
            <div class="fifth-left">
                <img src="images/section-five/fifth-left-img.png" alt="" class="fifth-left-img">
                <img src="images/section-five/fifth-left-img-shadow.png" alt="" class="fifth-left-shadow">
            </div>
            <div class="fifth-feedback">
                <p class="feedback-name">Grzegorz Zawierucha</p>
                <p class="feedback-text">MasterChef Winner <span class="feedback-highlight">Grzegorz Zawierucha</span> chose Royal Kitchen for his home</p>
                <img src="images/section-five/feedback-logo.png" alt="" class="feedback-logo">
            </div>
            <div class="fifth-right">
                <img src="images/section-five/fifth-right-img.png" alt="" class="fifth-right-img">
            </div>
        </div>
        <button class="feedback-button">
            <p class="feedback-btn-text">SEE FULL PROJECT</p>
            <img src="images/section-five/feedback-arrow.svg" alt="" class="feedback-arrow">
        </button>
    </section>

      <!-- sixth section -->
    <section class="sixth-section">
            <p class="sixth-title">Why Royal Kitchen</p>
            <div class="sixth-container">

                <div class="sixth-left">
                   
                    <div class = "sixth-left-main" >
                        <div class="sixth-left-container">
                                <img src="images/section-six/experience tag image.png" alt="" class="experience-tag">
                          <div class="sixth-left-image-container">
  <img class="slider-image image-after" src="images/section-six/after image.png" alt="after" />
  <img class="slider-image image-before" src="images/section-six/before image.jpeg" alt="before" />
</div>
                          <input
                            type="range"
                            min="0"
                            max="100"
                            value="50"
                            aria-label="Percentage of before photo shown"
                            class="slider"
                          />
                          <div class="slider-line" aria-hidden="true"></div>
                          <div class="slider-button" aria-hidden="true">

                              <img src="images/section-six/Group 19.png" alt="">

                          </div>
                        </div>

                    </div>
                </div>


                <div class="sixth-right">
                    <p class="sixth-heading">Where Experience Meets Innovation</p>
                    <p class="sixth-description">Laser-precise measurements, state-of-the-art CNC production, and EU-backed innovation setting the standard in bespoke kitchens for 12 years.</p>
                    <button style="margin: 0;" class="sixth-cta-btn">
                        <p class="sixth-cta-btn-text">Learn More</p>
                        <img src="images/hero/button-arrow.svg" alt="" class="sixth-cta-btn-arrow">
                    </button>
                </div>
            </div>
    </section>
        
    <!-- footer -->
    <footer>
            <div class="footer-container">
                <img src="images/footer/footer-top-img.png" alt="" class="footer-top-img">
                <p class="footer-heading">
                    Ready for Your Own Royal Kitchen?
                </p>
                <p class="footer-description">
                    Contact us today to schedule a private consultation – we’ll handle every detail of your dream kitchen.
                </p>

                <button class="footer-cta-btn">
                        <p class="footer-cta-btn-text">Schedule a consultation</p>
                        <img src="images/hero/button-arrow.svg" alt="" class="footer-cta-btn-arrow">
                </button>
            </div>
            <div class="footer-end">
                <img src="images/footer/left-arrow.svg" alt="" class="footer-left-arrow">
                <div class="footer-center">
                    <img src="images/footer/eu-icon.png" alt="" class="eu-icon">
                    <p class="footer-last-description">
                        Project co-financed by <br> <span class="footer-highlight">the European Union</span>
                    </p>
                </div>
                <img src="images/footer/footer-right-arrow.svg" alt="" class="footer-right-arrow">
            </div>
    </footer>


    <!-- contact form -->
    <div class="pcf-root" aria-hidden="true">
      <div class="pcf-overlay" id="pcf-overlay" aria-hidden="true">
          <div class="pcf-modal" role="dialog" aria-modal="true" aria-labelledby="pcf-modalTitle" id="pcf-modal">
            <div class="pcf-modal-head">
              <div class="pcf-modal-title">
                <!-- icon -->
                <svg width="36" height="36" viewBox="0 0 24 24" fill="none" aria-hidden="true">
                  <path d="M21 8V16C21 18 19 20 17 20H7C5 20 3 18 3 16V8" stroke="url(#pcf-g)" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"></path>
                  <path d="M7 12L10 14L17 9" stroke="url(#pcf-g)" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"></path>
                  <defs><linearGradient id="pcf-g" x1="0" x2="1" y1="0" y2="1"><stop offset="0" stop-color="#7C3AED"></stop><stop offset="1" stop-color="#06B6D4"></stop></linearGradient></defs>
                </svg>
              
                <div>
                  <h3 id="pcf-modalTitle">Start a conversation</h3>
                  <div class="pcf-modal-sub">Tell us a little about your project — we’ll get back within 1 business day.</div>
                </div>
              </div>
            
              <button class="pcf-close-btn" id="pcf-closeBtn" aria-label="Close contact form">✕</button>
            </div>
          
            <form class="pcf-contact" id="pcf-contactForm" novalidate>
              <div class="pcf-field">
                <input type="text" id="pcf-name" name="name" autocomplete="name" required />
                <label for="pcf-name" class="pcf-floating">Full name</label>
              </div>
            
              <div class="pcf-field">
                <input type="email" id="pcf-email" name="email" autocomplete="email" required />
                <label for="pcf-email" class="pcf-floating">Phone Number</label>
              </div>
            
              <div class="pcf-field pcf-full">
                <input type="text" id="pcf-company" name="company" />
                <label for="pcf-company" class="pcf-floating">Email address</label>
              </div>
            
              <div class="pcf-field pcf-full">
                <textarea id="pcf-message" name="message" required></textarea>
                <label for="pcf-message" class="pcf-floating">Tell us about your project</label>
                <div class="pcf-hint">A short summary, timeline, and preferred budget helps us reply faster.</div>
              </div>
            
              <div class="pcf-full pcf-actions">
                <button type="button" class="pcf-secondary" id="pcf-cancelBtn">Cancel</button>
                <button type="submit" class="pcf-submit" id="pcf-submitBtn">Send message</button>
              </div>
            </form>
          
            <!-- success container will be inserted dynamically -->
          </div>
        </div>
</div>


    <script src="./js/index.js"></script>
    <script>
    document.addEventListener('DOMContentLoaded', function () {
    const section = document.querySelector('.second-section');
    if (!section) return;

    if (window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
      section.classList.add('in-view');
      return;
    }

    let removeTimer = null;
    const REMOVE_DELAY = 120; 

    const ioOptions = {
      root: null,
      rootMargin: '0px 0px -12% 0px', 
      threshold: [0, 0.12, 0.25, 0.5]
    };

    const io = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        const isVisible = entry.intersectionRatio >= 0.12;

        if (isVisible) {
          if (removeTimer) {
            clearTimeout(removeTimer);
            removeTimer = null;
          }
          section.classList.add('in-view');
        } else {
          if (removeTimer) clearTimeout(removeTimer);
          removeTimer = setTimeout(() => {
            section.classList.remove('in-view');
            removeTimer = null;
          }, REMOVE_DELAY);
        }
      });
    }, ioOptions);

    io.observe(section);

    // Optional: expose functions for debugging in console:
    // window.__revealSecondSection = () => { section.classList.add('in-view'); }
    // window.__hideSecondSection = () => { section.classList.remove('in-view'); }
    });
    </script>
    
    <script>
        document.addEventListener('DOMContentLoaded', function () {
  const section = document.querySelector('.third-section');
  if (!section) return;


  if (window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
    section.classList.add('in-view');
    return;
  }

  let removeTimer = null;
  const REMOVE_DELAY = 90; 

  const ioOptions = {
    root: null,
    rootMargin: '0px 0px -10% 0px',
    threshold: [0, 0.12, 0.25]
  };

  const io = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      const isVisible = entry.intersectionRatio >= 0.12;
      if (isVisible) {
        if (removeTimer) { clearTimeout(removeTimer); removeTimer = null; }
        section.classList.add('in-view');
      } else {
        if (removeTimer) clearTimeout(removeTimer);
        removeTimer = setTimeout(() => {
          section.classList.remove('in-view');
          removeTimer = null;
        }, REMOVE_DELAY);
      }
    });
  }, ioOptions);

  io.observe(section);

  // Debug helpers (optional)
  // window.__revealThird = () => section.classList.add('in-view');
  // window.__hideThird = () => section.classList.remove('in-view');
});
    </script>

<script>
/*
  Replayable scroll-driven reveal for .fifth-section
  - Toggles .in-view on enter/leave (replays on re-enter)
  - Debounces removal to avoid flicker
  - Respects prefers-reduced-motion: immediately reveals and doesn't observe
*/
document.addEventListener('DOMContentLoaded', function () {
  const section = document.querySelector('.fifth-section');
  if (!section) return;

 
  if (window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
    section.classList.add('in-view');
    return;
  }

  let removeTimer = null;
  const REMOVE_DELAY = 110; 

  const ioOptions = {
    root: null,
    rootMargin: '0px 0px -12% 0px',
    threshold: [0, 0.12, 0.25]
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      const isVisible = entry.intersectionRatio >= 0.12;
      if (isVisible) {
        if (removeTimer) { clearTimeout(removeTimer); removeTimer = null; }
        section.classList.add('in-view');
      } else {
        if (removeTimer) clearTimeout(removeTimer);
        removeTimer = setTimeout(() => {
          section.classList.remove('in-view');
          removeTimer = null;
        }, REMOVE_DELAY);
      }
    });
  }, ioOptions);

  observer.observe(section);

  // Optional dev helpers:
  // window.__revealFifth = () => section.classList.add('in-view');
  // window.__hideFifth = () => section.classList.remove('in-view');
});
</script>
<script>
/*
  Sixth-section observer: toggles .in-view on enter/leave so animations replay.
  - Replays on re-enter, reverses on leave.
  - Debounces removal to avoid flicker.
  - Respects prefers-reduced-motion.
  - Does NOT touch slider / before-after logic or .experience-tag.
*/
document.addEventListener('DOMContentLoaded', function () {
  const section = document.querySelector('.sixth-section');
  if (!section) return;

  if (window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
    section.classList.add('in-view');
    return;
  }

  let removeTimer = null;
  const REMOVE_DELAY = 100; 

  const ioOptions = {
    root: null,
    rootMargin: '0px 0px -12% 0px', 
    threshold: [0, 0.12, 0.25]
  };

  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      const isVisible = entry.intersectionRatio >= 0.12;
      if (isVisible) {
        if (removeTimer) { clearTimeout(removeTimer); removeTimer = null; }
        section.classList.add('in-view');
      } else {
        if (removeTimer) clearTimeout(removeTimer);
        removeTimer = setTimeout(() => {
          section.classList.remove('in-view');
          removeTimer = null;
        }, REMOVE_DELAY);
      }
    });
  }, ioOptions);

  observer.observe(section);

  // Optional dev helpers:
  // window.__revealSixth = () => section.classList.add('in-view');
  // window.__hideSixth = () => section.classList.remove('in-view');
});
</script>
<script>
/*
  Footer observer: toggles .in-view on enter/leave so footer reveal replays.
  - Adds .in-view when visible (>=12%), removes when not.
  - Debounces removal to avoid flicker.
  - Respects prefers-reduced-motion.
*/
document.addEventListener('DOMContentLoaded', function () {
  const footer = document.querySelector('footer');
  if (!footer) return;

  if (window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
    footer.classList.add('in-view');
    return;
  }

  let removeTimer = null;
  const REMOVE_DELAY = 110; // ms - tweak to taste

  const io = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      const isVisible = entry.intersectionRatio >= 0.12;
      if (isVisible) {
        if (removeTimer) { clearTimeout(removeTimer); removeTimer = null; }
        footer.classList.add('in-view');
      } else {
        if (removeTimer) clearTimeout(removeTimer);
        removeTimer = setTimeout(() => {
          footer.classList.remove('in-view');
          removeTimer = null;
        }, REMOVE_DELAY);
      }
    });
  }, {
    root: null,
    rootMargin: '0px 0px -12% 0px',
    threshold: [0, 0.12, 0.25]
  });

  io.observe(footer);

  // dev helpers (optional)
  // window.__revealFooter = () => footer.classList.add('in-view');
  // window.__hideFooter = () => footer.classList.remove('in-view');
});
</script>
<script>
/*
  Observe all .fourth-section elements and toggle .in-view on enter/leave.
  - Replays on re-enter, reverses on leave.
  - Debounces removal slightly to avoid flicker.
  - Automatically starts observing newly added .fourth-section nodes (MutationObserver).
  - Respects prefers-reduced-motion (reveals immediately and does not observe).
*/

document.addEventListener('DOMContentLoaded', function () {
  const prefersReduced = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  const REMOVE_DELAY = 100; // ms debounce for removal

  if (prefersReduced) {
    // reveal all immediately, do not set up observers
    document.querySelectorAll('.fourth-section').forEach(s => s.classList.add('in-view'));
    return;
  }

  const ioOptions = {
    root: null,
    rootMargin: '0px 0px -12% 0px',
    threshold: [0, 0.12, 0.25]
  };

  const io = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      const section = entry.target;
      const visible = entry.intersectionRatio >= 0.12;
      // store per-section timer to debounce removal
      if (!section.__removeTimer) section.__removeTimer = null;

      if (visible) {
        if (section.__removeTimer) {
          clearTimeout(section.__removeTimer);
          section.__removeTimer = null;
        }
        section.classList.add('in-view');
      } else {
        // debounce removal to avoid flicker when quickly scrolling
        if (section.__removeTimer) clearTimeout(section.__removeTimer);
        section.__removeTimer = setTimeout(() => {
          section.classList.remove('in-view');
          section.__removeTimer = null;
        }, REMOVE_DELAY);
      }
    });
  }, ioOptions);

  // observe existing fourth-section nodes
  function observeAll() {
    document.querySelectorAll('.fourth-section').forEach(section => {
      // avoid observing same node twice
      if (!section.__isObserved) {
        io.observe(section);
        section.__isObserved = true;
      }
    });
  }
  observeAll();

  // watch for dynamically added .fourth-section nodes and observe them
  const mo = new MutationObserver((mutations) => {
    for (const m of mutations) {
      if (m.type === 'childList' && m.addedNodes.length) {
        m.addedNodes.forEach(node => {
          // if the added node itself is a .fourth-section
          if (node.nodeType === 1) {
            if (node.classList && node.classList.contains('fourth-section')) {
              if (!node.__isObserved) {
                io.observe(node);
                node.__isObserved = true;
              }
            }
            // also check if it contains any .fourth-section children
            node.querySelectorAll && node.querySelectorAll('.fourth-section').forEach(ss => {
              if (!ss.__isObserved) {
                io.observe(ss);
                ss.__isObserved = true;
              }
            });
          }
        });
      }
    }
  });

  mo.observe(document.body, { childList: true, subtree: true });

  // Optional: expose helper for testing in console
  // window.__reobserveFourth = observeAll;
});
</script>
<script>
(function(){
  // config
  const TRIGGER_CLASS = 'pcf-open'; // add this class to any CTA to open the form

  // DOM refs
  const root = document.querySelector('.pcf-root');
  if(!root) {
    console.warn('PCF: .pcf-root not found - make sure you inserted the HTML snippet.');
    return;
  }
  const overlay = document.getElementById('pcf-overlay');
  const modal = document.getElementById('pcf-modal');
  const closeBtn = document.getElementById('pcf-closeBtn');
  const cancelBtn = document.getElementById('pcf-cancelBtn');
  const form = document.getElementById('pcf-contactForm');
  const submitBtn = document.getElementById('pcf-submitBtn');

  // helper: refresh floating labels
  function refreshFloating(){
    root.querySelectorAll('.pcf-field').forEach(f=>{
      const input = f.querySelector('input, textarea, select');
      if(!input) return;
      if(input.value && input.value.trim() !== '') f.classList.add('pcf-has-value'); else f.classList.remove('pcf-has-value');
    });
  }
  document.addEventListener('input', refreshFloating);
  document.addEventListener('change', refreshFloating);
  refreshFloating();

  // focus trap (scoped)
  let lastFocusedBeforeOpen = null;
  function trapFocus(container){
    lastFocusedBeforeOpen = document.activeElement;
    const focusable = Array.from(container.querySelectorAll('a[href],button:not([disabled]),input,select,textarea,[tabindex]:not([tabindex="-1"])')).filter(Boolean);
    if(!focusable.length) return;
    const first = focusable[0];
    const last = focusable[focusable.length-1];

    function handler(e){
      if(e.key === 'Tab'){
        if(e.shiftKey && document.activeElement === first){ e.preventDefault(); last.focus(); }
        else if(!e.shiftKey && document.activeElement === last){ e.preventDefault(); first.focus(); }
      }
      if(e.key === 'Escape'){ closeModal(); }
    }
    container.__pcf_trap = handler;
    document.addEventListener('keydown', handler);
  }
  function releaseFocus(container){
    if(container && container.__pcf_trap) document.removeEventListener('keydown', container.__pcf_trap);
  }

  // open/close
  function openModal(prefill = {}) {
    overlay.setAttribute('aria-hidden','false');
    root.setAttribute('aria-hidden','false');
    // prefill if provided
    if(prefill.name) form.name.value = prefill.name;
    if(prefill.email) form.email.value = prefill.email;
    if(prefill.message) form.message.value = prefill.message;
    refreshFloating();
    // focus first input after animation
    setTimeout(()=> {
      const nameInput = document.getElementById('pcf-name');
      if(nameInput) nameInput.focus();
    }, 140);
    trapFocus(modal);
  }
  function closeModal(){
    overlay.setAttribute('aria-hidden','true');
    root.setAttribute('aria-hidden','true');
    releaseFocus(modal);
    // reset and restore form (hide success card if any)
    const successCard = modal.querySelector('.pcf-success');
    if(successCard) successCard.remove();
    form.style.display = '';
    form.reset();
    refreshFloating();
    if(lastFocusedBeforeOpen && typeof lastFocusedBeforeOpen.focus === 'function') lastFocusedBeforeOpen.focus();
    submitBtn.disabled = false;
    submitBtn.textContent = 'Send message';
  }

  // click handlers for triggers (delegated so you can add buttons later)
  document.addEventListener('click', function(e){
    const t = e.target.closest ? e.target.closest('.' + TRIGGER_CLASS) : null;
    if(!t) return;
    e.preventDefault();
    // optional prefill from data attributes
    const prefill = {
      name: t.getAttribute('data-pcf-prefill-name') || '',
      email: t.getAttribute('data-pcf-prefill-email') || '',
      message: t.getAttribute('data-pcf-prefill-message') || ''
    };
    openModal(prefill);
  });

  // close listeners
  closeBtn.addEventListener('click', closeModal);
  cancelBtn.addEventListener('click', closeModal);
  overlay.addEventListener('click', function(e){ if(e.target === overlay) closeModal(); });

  // form submission (simulate)
  form.addEventListener('submit', async function(e){
    e.preventDefault();
    const name = (form.name.value || '').trim();
    const email = (form.email.value || '').trim();
    const message = (form.message.value || '').trim();
    if(!name || !email || !message){
      // shake
      modal.animate([{transform:'translateX(0)'},{transform:'translateX(-6px)'},{transform:'translateX(6px)'},{transform:'translateX(0)'}],{duration:360});
      return;
    }

    // disable + spinner
    submitBtn.disabled = true;
    submitBtn.innerHTML = '';
    const spinner = document.createElement('span'); spinner.className = 'pcf-spinner'; submitBtn.appendChild(spinner);

    // simulate network
    await new Promise(r => setTimeout(r, 900 + Math.random()*900));

    // show success: hide form, insert success card
    form.style.display = 'none';
    const successCard = document.createElement('div');
    successCard.className = 'pcf-success pcf-full';
    successCard.innerHTML = `
      <div class="pcf-check" aria-hidden="true">
        <svg viewBox="0 0 24 24" fill="none"><path d="M20 6L9 17l-5-5" stroke="${getComputedStyle(document.documentElement).getPropertyValue('--pcf-success') || '#22c55e'}" stroke-width="2.2" stroke-linecap="round" stroke-linejoin="round"></path></svg>
      </div>
      <h3 style="margin:0;">Message sent</h3>
      <p style="margin:0;color:var(--pcf-muted);text-align:center;max-width:420px">Thanks! We received your message and will reply within 1 business day. If your request is urgent, please include a phone number.</p>
    `;
    // append after form
    form.insertAdjacentElement('afterend', successCard);
    // focus close for accessibility
    closeBtn.focus();

    // auto-close after a short delay
    setTimeout(()=>{
      successCard.animate([{opacity:1},{opacity:0}],{duration:600,fill:'forwards'}).onfinish = closeModal;
    }, 1400);
  });

  // init: ensure overlay hidden
  overlay.setAttribute('aria-hidden','true');
  root.setAttribute('aria-hidden','true');

})();
</script>

</body>
</html>